{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/server/app.ts","webpack:///./src/server/const/const.ts","webpack:///./src/server/index.ts","webpack:///./src/server/objects/Player.ts","webpack:///./src/server/objects/PlayerClass.ts","webpack:///./src/server/objects/Skill.ts","webpack:///./src/shared/const.ts","webpack:///external \"express\"","webpack:///external \"http\"","webpack:///external \"mysql\"","webpack:///external \"path\"","webpack:///external \"socket.io\""],"names":[],"mappings":"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","file":"./server/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/server/index.ts\");\n","console.log(\"\\n\\n===============>\\t app starting\\n\");\r\nimport { SHARED } from \"../shared/const\";\r\nimport { CONST } from './const/const';\r\n\r\nimport * as mysql from 'mysql';\r\nimport { createServer, Server } from 'http';\r\nimport * as express from 'express';\r\nimport * as socketIo from 'socket.io';\r\nimport * as path from 'path';\r\nimport { Player } from './objects/Player'\r\n\r\n\r\nexport class App {\r\n    public static readonly PORT:number = 8080;\r\n    public app: express.Application;\r\n    private server: Server;\r\n    public io: SocketIO.Server;\r\n    private port: string | number;\r\n    public db: mysql.Pool;\r\n    public zones: {}[];\r\n    private dbConfig = {\r\n        host        : CONST.HOST,\r\n        user        : CONST.DBUSER,\r\n        password    : CONST.DBPASSWORD,\r\n        database    : CONST.DATABASE\r\n    };\r\n\r\n    constructor() {\r\n        this.createApp();\r\n        this.config();\r\n        this.createServer();\r\n        this.Routes();\r\n        this.sockets();\r\n        this.listen();\r\n        this.zones = CONST.ZONES;\r\n        this.dbConnect();\r\n    }\r\n\r\n    private createApp(): void {\r\n        this.app = express();\r\n    }\r\n\r\n    private config(): void {\r\n        this.port = process.env.PORT || 4001;\r\n    }\r\n\r\n    private createServer(): void {\r\n        this.server = createServer(this.app);\r\n    }\r\n\r\n    private Routes(): void {\r\n        this.app.use(express.static('./dist/client'));\r\n        this.app.get('/', function (req, res) {\r\n            res.sendFile(path.resolve('./dist/client/index.html'));;\r\n        });\r\n        this.app.use(\"/assets\", express.static('./dist/client/assets'));\r\n    }\r\n\r\n    private sockets(): void {\r\n        this.io = socketIo.listen(this.server);;\r\n    }\r\n\r\n    private listen(): void {\r\n        this.server.listen(this.port, () => {\r\n            console.log(`\\n\\n===============>\\t running server on port ${this.port}\\n`);\r\n        });\r\n\r\n        this.io.on('connect', (socket: socketIo.Socket) => {\r\n            console.log(`\\n\\n===============>\\t connected client on port ${this.port}\\n`);\r\n            socket.on('messageFromFrontend', (m: string) => {\r\n                console.log(`\\n\\n===============>\\t ${m}\\n`);\r\n                socket.emit('messageFromBackend', 'testing connectivity from backend');\r\n            });\r\n\r\n            socket.on('signIn', (signInInfo: any) => {\r\n                let sql = 'SELECT * FROM player WHERE username = ? AND password = ?';\r\n                var query = this.db.query(sql, [signInInfo.username,signInInfo.password], (err, res) => {\r\n                    if (err) {\r\n                        console.log(err);\r\n                        socket.emit('errorFromBackend', err.code);                        \r\n                    }else if(res.length === 0){\r\n                        socket.emit('errorFromBackend', 'username and or password was incorrect');                 \r\n                    }else{\r\n                        console.log(`\\n\\n===============>\\t Player logging in\\n`)\r\n                        console.log(`===============>\\t username: ${signInInfo.username}\\n`)\r\n                        console.log(`===============>\\t password: ${signInInfo.password}\\n`)\r\n                        this.CreatePlayer(socket, { player: res[0], isNew: false });\r\n                    }\r\n                })\r\n            })\r\n\r\n            socket.on('signUp', (signUpInfo) => {\r\n                if(!signUpInfo.username || !signUpInfo.password){\r\n                    let error = \"no username and or password given\";\r\n                    console.log(error);\r\n                    socket.emit('errorFromBackend', error);\r\n                    return;         \r\n                }\r\n                let sql = 'SELECT * FROM player WHERE username = ? AND password = ?';\r\n                let query = this.db.query(sql, [signUpInfo.username, signUpInfo.password], (err, res) => {\r\n                    if(err){\r\n                        console.log(err);\r\n                        socket.emit('errorFromBackend', err.code);\r\n                    }else if(res.length !== 0){\r\n                        socket.emit('errorFromBackend', 'this username is already in use');\r\n                    }else{\r\n                        sql = 'INSERT INTO player SET ?';\r\n                        let query = this.db.query(sql, {username:signUpInfo.username, password:signUpInfo.password}, (err, res) => {\r\n                            if(err){\r\n                                console.log(err);\r\n                            }else{\r\n                                let player = this.CreatePlayer(socket, {player: {id:res.insertId, username:signUpInfo.username}, isNew: true});\r\n                            }\r\n                        });\r\n                    }\r\n                }) \r\n            })\r\n        });\r\n    }\r\n\r\n    private CreatePlayer(socket: socketIo.Socket, playerInfo: any): void {\r\n        socket.emit('signInSuccess')\r\n        socket.on('gameReady', () =>{\r\n            let player = new Player(this.io, socket, this.db, playerInfo);\r\n        })\r\n    }\r\n\r\n    private dbConnect(): void {\r\n        var db = mysql.createPool(this.dbConfig);\r\n        db.getConnection((err) => {\r\n            if (err) {\r\n                throw err\r\n            }else {\r\n                console.log(`\\n\\n===============>\\t ${CONST.DATABASE} database connected\\n`);\r\n                let sql = \"CREATE TABLE IF NOT EXISTS Player(id int AUTO_INCREMENT, username VARCHAR(30), password VARCHAR(255), zone VARCHAR(30), health int, class VARCHAR(30), farming int, mining int, fighting int, healing int, crafting int, PRIMARY KEY (id), UNIQUE KEY username (username))\"\r\n                db.query(sql, (err, result) => {\r\n                    if (err) {\r\n                        throw err\r\n                    }else {\r\n                        console.log(`\\n\\n===============>\\t ${CONST.DATABASE} database tables check\\n`);\r\n                    }\r\n                });\r\n                this.db = db;\r\n            }\r\n        });\r\n\r\n        db.on('error', (err) => {\r\n            if(err.code === 'PROTOCOL_CONNECTION_LOST') {\r\n                console.log(`\\n\\n===============>\\t ${CONST.DATABASE} database tables check\\n`);\r\n                var db = mysql.createPool(this.dbConfig);\r\n                this.db = db;\r\n              } else {\r\n                throw err;\r\n              }\r\n        })\r\n        // db.connect((err) => {\r\n        //     if (err) {\r\n        //         throw err\r\n        //     }else {\r\n        //         console.log(`\\n\\n===============>\\t mySQL connected\\n`);\r\n        //         let sql = 'CREATE DATABASE IF NOT EXISTS elevaidus';\r\n        //         db.query(sql, (err, result) => {\r\n        //             if (err) {\r\n        //                 throw err\r\n        //             }else {\r\n        //                 console.log(`\\n\\n===============>\\t database check\\n`);\r\n        //                 db.end();\r\n                        \r\n        //             }\r\n        //         })\r\n        //     }\r\n        // });\r\n    }\r\n}\r\n","export let CONST = {\r\n    // mySQL database settings\r\n    // mysql://b07173e9b72118:45517a09@us-cdbr-iron-east-01.cleardb.net/heroku_4d115db42117719?reconnect=true\r\n    HOST: 'us-cdbr-iron-east-01.cleardb.net', //'localhost',\r\n    DBUSER:  'b07173e9b72118', //'elevaidus',\r\n    DBPASSWORD: '45517a09', //'mysqlP@$$w0rd',\r\n    DATABASE: 'heroku_4d115db42117719', //'elevaidus',\r\n\r\n    // player settings\r\n    STARTINGZONE: 'a1',\r\n    STARTINGHEALTH: 100,\r\n\r\n    // skills\r\n    SKILLS: ['farming','mining','healing','fighting','crafting'],\r\n\r\n    //classes\r\n    PLAYERCLASSES:[\r\n        {name:'knight',     farming:0,  mining:0,   healing:5,  fighting:25,    crafting:0},\r\n        {name:'farmer',     farming:25, mining:0,   healing:5,  fighting:0,     crafting:0},\r\n        {name:'miner',      farming:5,  mining:20,  healing:0,  fighting:5,     crafting:0},\r\n        {name:'priest',     farming:5,  mining:0,   healing:25, fighting:0,     crafting:5},\r\n        {name:'craftsmen',  farming:0,  mining:5,   healing:0,  fighting:0,     crafting:25}\r\n    ],\r\n\r\n    ZONES:[\r\n        { name: 'a1' },\r\n        { name: 'a2' },\r\n        { name: 'a3' },\r\n        { name: 'a4' },\r\n        { name: 'a5' },\r\n        { name: 'b1' },\r\n        { name: 'b2' },\r\n        { name: 'b3' },\r\n        { name: 'b4' },\r\n        { name: 'b5' },\r\n        { name: 'c1' },\r\n        { name: 'c2' },\r\n        { name: 'c3' },\r\n        { name: 'c4' },\r\n        { name: 'c5' },\r\n        { name: 'd1' },\r\n        { name: 'd2' },\r\n        { name: 'd3' },\r\n        { name: 'd4' },\r\n        { name: 'd5' },\r\n        { name: 'e1' },\r\n        { name: 'e2' },\r\n        { name: 'e3' },\r\n        { name: 'e4' },\r\n        { name: 'e5' },\r\n    ]\r\n\r\n}\r\n","import { App } from './app';\r\n\r\n//start application\r\nvar app = new App();\r\n","import * as mysql from 'mysql';\r\nimport { PlayerInfo, SHARED } from \"../../shared/const\"\r\nimport { CONST } from '../const/const';\r\nimport {Skill, GetSkills} from './Skill';\r\nimport {PlayerClass, GetPlayerClasses} from './PlayerClass';\r\n\r\n// zones, not sure where else to put them atm\r\nvar zones: any = [];\r\nSHARED.ZONES.forEach(zone => {\r\n    zones[zone] = {};\r\n    zones[zone].players = [];\r\n});\r\n\r\nconst playerClasses: Array<PlayerClass> = GetPlayerClasses();\r\n\r\nexport class Player {\r\n    private io: SocketIO.Server;\r\n    private socket: SocketIO.Socket;\r\n    private db: mysql.Pool;\r\n    private class: string;\r\n    private skills: Skill[]; \r\n    private id: number;\r\n    private username: string;\r\n    private zone: string;\r\n    private health: number;\r\n\r\n\r\n    constructor(io: SocketIO.Server, socket: SocketIO.Socket, db: mysql.Pool, playerInfo: any){\r\n       this.io = io;\r\n       this.socket = socket;\r\n       this.Listen();\r\n       this.db = db;\r\n       this.id = playerInfo.player.id;\r\n       this.username = playerInfo.player.username;\r\n       this.skills = GetSkills();\r\n        if(playerInfo.isNew){\r\n            this.CreateNewPlayer();\r\n        }else{\r\n            this.SetPlayerInfo(playerInfo.player);\r\n        }\r\n    }\r\n\r\n    private Listen(): void {\r\n        this.socket.on('disconnect', () => {\r\n            console.log(`\\n\\n===============>\\t client disconnected\\n`);\r\n            delete zones[this.zone].players[this.socket.id];\r\n            this.socket.to(this.zone).emit('removePlayer', this.FrontendPlayerInfo());\r\n        });\r\n    }\r\n\r\n    private SetPlayerInfo(playerInfo: any): void {\r\n        this.SetSkills(playerInfo);\r\n        this.class = playerInfo.class;\r\n        this.zone = playerInfo.zone;\r\n        this.health = playerInfo.health;\r\n        this.Join();\r\n    }\r\n\r\n    private CreateNewPlayer(): void {\r\n        this.GenerateClass();\r\n        this.GenerateSkills();\r\n        this.zone = CONST.STARTINGZONE;\r\n        this.health = CONST.STARTINGHEALTH;\r\n        this.saveInDatabase();\r\n        this.Join();\r\n    }\r\n\r\n    private Join(): void {        \r\n        this.socket.emit('join', this.FrontendPlayerInfo());\r\n        this.JoinNewArea(this.zone, true);\r\n    }\r\n\r\n    private JoinNewArea(newZone:string, newlyJoin: boolean): void {\r\n        if(!newlyJoin){\r\n            this.socket.leave(this.zone)\r\n            this.socket.to(this.zone).emit('removePlayer', this.FrontendPlayerInfo());\r\n        }\r\n        this.zone = newZone;\r\n        this.socket.join(this.zone);\r\n        //TODO: save new area in database\r\n        let playersInArea: PlayerInfo[] = []\r\n        zones[this.zone].players[this.socket.id] = this.FrontendPlayerInfo();\r\n        for(let p in zones[this.zone].players){\r\n            playersInArea.push(zones[this.zone].players[p])\r\n        };\r\n        this.socket.emit('currentPlayers', playersInArea);\r\n        this.socket.to(this.zone).emit('addPlayer', zones[this.zone].players[this.socket.id]);\r\n    }\r\n\r\n    private FrontendPlayerInfo(): PlayerInfo {\r\n        let player: PlayerInfo = {\r\n            id: this.id,\r\n            socketId: this.socket.id,\r\n            username: this.username,\r\n            skills: this.skills,\r\n            class: this.class,\r\n            zone: this.zone,\r\n            health: this.health\r\n        }\r\n        return player;\r\n    }\r\n\r\n    private GenerateClass(): void {\r\n        var randomNumber = Math.floor(Math.random()*playerClasses.length) \r\n        this.class =  playerClasses[randomNumber].name;\r\n    };\r\n\r\n\r\n\r\n    private GenerateSkills(): void {\r\n        this.GenerateRandomSkills();\r\n        let thisPlayerClass = playerClasses.find(i => i.name === this.class)\r\n        thisPlayerClass.skills.forEach(i => {\r\n            let skill = this.skills.find(j => j.name === i.name)\r\n            if(skill === undefined){\r\n                return;\r\n            }\r\n            skill.level += i.level;\r\n        });\r\n    }\r\n\r\n    public SetSkills(playerInfo: any): void {\r\n        for(var s = 0; s < this.skills.length; s++){\r\n            for(let prop in playerInfo){\r\n                if(prop === this.skills[s].name){\r\n                    this.skills[s].level = playerInfo[prop];\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    public GenerateRandomSkills(): void {\r\n        this.skills.forEach(i => {\r\n            i.level = Math.floor(Math.random()*26)\r\n        });\r\n    }\r\n\r\n    private saveInDatabase(): void {\r\n        let sql = 'UPDATE player SET zone = ?, health = ?, class = ?, farming = ?, mining = ?, healing = ?, fighting = ?, crafting = ? WHERE id = ?';\r\n        this.db.query(sql, \r\n            [\r\n                this.zone,\r\n                this.health,\r\n                this.class,\r\n                this.skills.find(i => i.name === 'farming').level,\r\n                this.skills.find(i => i.name === 'mining').level,\r\n                this.skills.find(i => i.name === 'healing').level,\r\n                this.skills.find(i => i.name === 'fighting').level,\r\n                this.skills.find(i => i.name === 'crafting').level,\r\n                this.id\r\n            ],\r\n            (err, res) =>{\r\n                if(err){\r\n                    console.log(err);\r\n                }else{\r\n                    console.log(`\\n\\n===============>\\t Player ${this.id} updated in database \\n`);\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    PlayerUpdate(data: any){\r\n        \r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n","import {Skill} from './Skill';\r\nimport { CONST } from '../const/const';\r\n\r\n\r\nexport class PlayerClass {\r\n    name: string;\r\n    skills: Skill[];\r\n    constructor(name:string, skills: Skill[]){\r\n        this.name = name;\r\n        this.skills = skills;\r\n    }\r\n}\r\n\r\nexport function GetPlayerClasses(){\r\n    let playerClasses: Array<PlayerClass> = new Array<PlayerClass>();\r\n    CONST.PLAYERCLASSES.forEach(pClass => {\r\n        playerClasses.push(\r\n            new PlayerClass(\r\n                pClass.name,\r\n                 [ \r\n                     {name: 'farming', level: pClass.farming, progress: 0 }, \r\n                     {name: 'mining', level: pClass.mining, progress: 0 }, \r\n                     {name: 'healing', level: pClass.healing, progress: 0 }, \r\n                     {name: 'fighting', level: pClass.fighting, progress: 0 },\r\n                     {name: 'crafting', level: pClass.crafting, progress: 0 },\r\n                ]\r\n            )\r\n        )\r\n    });\r\n    return playerClasses;\r\n}\r\n","import { CONST } from '../const/const';\r\n\r\nexport class Skill {\r\n    name: string;\r\n    level: number;\r\n    progress: number;\r\n\r\n    constructor(name:string){\r\n        this.name = name;\r\n        this.level = 0;\r\n        this.progress = 0;\r\n    }\r\n}\r\n\r\nexport function GetSkills(){\r\nlet skills: Array<Skill> = new Array<Skill>();\r\nCONST.SKILLS.forEach(i => {\r\n    skills.push(new Skill(i))    \r\n});\r\nreturn skills;\r\n}","export let SHARED = {\r\n    // map\r\n    ZONELTRS: ['a', 'b', 'c', 'd', 'e'],\r\n    ZONES: ['a1','a2','a3','a4','a5','b1','b2','b3','b4','b5','c1','c2','c3','c4','c5','d1','d2','d3','d4','d5','e1','e2','e3','e4','e5',],\r\n    ZONESIZE: 128,\r\n    MAPSTARTX: 320,\r\n    MAPSTARTY: 0,\r\n}\r\n\r\nexport function Resize(): void {\r\n    var canvas = this.game.canvas, width = window.innerWidth, height = window.innerHeight;\r\n    var wratio = width / height, ratio = canvas.width / canvas.height;\r\n    if (wratio < ratio) {\r\n        canvas.style.width = width + \"px\";\r\n        canvas.style.height = (width / ratio) + \"px\";\r\n    } else {\r\n        canvas.style.width = (height * ratio) + \"px\";\r\n        canvas.style.height = height + \"px\";\r\n    }\r\n}\r\n\r\nexport class PlayerInfo {\r\n    id: number;\r\n    socketId: string;\r\n    username: string;\r\n    skills: {}[];\r\n    class: string;\r\n    zone: string;\r\n    health: number;\r\n}","module.exports = require(\"express\");","module.exports = require(\"http\");","module.exports = require(\"mysql\");","module.exports = require(\"path\");","module.exports = require(\"socket.io\");"],"sourceRoot":""}